<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Cary"><meta name="keywords" content="个人博客"><meta name="description" conauthortent="若尧的博客"><link rel="alternative" href="/atom.xml" title="若尧" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>移动端适配方案 - 若尧</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><div class="hide" id="particles-oli-wrapper"></div><header class="head"><h1 class="head-title u-fl"><a href="/">若尧</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">关于</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-08-28T02:22:32.000Z">八月 28, 2018</time><h1 class="post__title"><a href="/2018/08/28/css-mobile/">移动端适配方案</a></h1><div class="post__main echo"><h3 id="1-rem（网易方案）"><a href="#1-rem（网易方案）" class="headerlink" title="1.rem（网易方案）"></a>1.rem（网易方案）</h3><p>按设计稿640px宽度的话，为了计算方便，取一个100px的font-size为参照，那么body元素的宽度就可以设置为width: 6.4rem，，于是html的font-size=deviceWidth / 6.4。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> <span class="title">rem</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fz = <span class="built_in">document</span>.documentElement.clientWidth / <span class="number">6.4</span>;</span><br><span class="line">  <span class="comment">//最好限制下最大值</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.style.fontSize = fz &lt;= <span class="number">100</span> ? fz + <span class="string">'px'</span> : <span class="string">'100px'</span>;</span><br><span class="line">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	  rem();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>然后布局是按设计稿的数值除以100，得到对应的rem值。<br>同时，font-size不再使用rem,可以结合媒体查询<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">media</span> screen and (max-width:<span class="number">321px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.m-navlist</span>&#123;<span class="attribute">font-size</span>:<span class="number">15px</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">321px</span>) and (max-width:<span class="number">400px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.m-navlist</span>&#123;<span class="attribute">font-size</span>:<span class="number">16px</span>&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">media</span> screen and (min-width:<span class="number">400px</span>)&#123;</span><br><span class="line">    <span class="selector-class">.m-navlist</span>&#123;<span class="attribute">font-size</span>:<span class="number">18px</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-淘宝方案"><a href="#2-淘宝方案" class="headerlink" title="2.淘宝方案"></a>2.淘宝方案</h3><p>(1)动态设置viewport的scale<br>device-width的计算公式为：设备的物理分辨率/(devicePixelRatio * scale)，<br>在scale为1的情况下，device-width = 设备的物理分辨率/devicePixelRatio 。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scale = <span class="number">1</span> / devicePixelRatio;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'meta[name="viewport"]'</span>).setAttribute(<span class="string">'content'</span>,<span class="string">'initial-scale='</span> + scale + <span class="string">', maximum-scale='</span> + scale + <span class="string">', minimum-scale='</span> + scale + <span class="string">', user-scalable=no'</span>);</span><br></pre></td></tr></table></figure></p>
<p>(2)动态计算html的font-size<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.documentElement.style.fontSize = <span class="built_in">document</span>.documentElement.clientWidth / <span class="number">10</span> + <span class="string">'px'</span>;</span><br></pre></td></tr></table></figure></p>
<p>(3)布局的时候，各元素的css尺寸=设计稿标注尺寸/设计稿横向分辨率/10<br>(4)font-size可能需要额外的媒介查询，并且font-size不使用rem，这一点跟网易是一样的。</p>
<h3 id="3-vw-vh"><a href="#3-vw-vh" class="headerlink" title="3.vw vh"></a>3.vw vh</h3><p>1vw = 1/100th viewport width<br>1vh = 1/100th viewport heght<br>用viewport width的百分比来设置element width<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//640px作为设计稿基准</span><br><span class="line">$vm_base: 640; </span><br><span class="line">@function vm($px) &#123;</span><br><span class="line">    @return ($px / 640) * 100vw;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//通过代码，假如设计稿中元素的宽度是 40px ，那么就可以在样式中写</span><br><span class="line">.test&#123;</span><br><span class="line">    width:vm(40)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="4-vw结合rem"><a href="#4-vw结合rem" class="headerlink" title="4.vw结合rem"></a>4.vw结合rem</h3><p>计算1px = 100vw/750px = 0.13vw,取1rem = 100px = 13.33vw。<br>布局时按设计稿的数值除以100，得到对应的rem值。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">html</span>&#123;<span class="attribute">font-size</span>:<span class="number">13.33333333vw</span>&#125;</span><br></pre></td></tr></table></figure></p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/css/">css</a></li></ul></footer></article><link rel="stylesheet" href="/css/menu.css"><script src="/js/jquery.autoMenu.js"></script><div class="autoMenu" id="autoMenu" data-autoMenu></div><section class="reward"> <a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechatImage.jpg" title="微信"><img src="/img/alipayImage.jpg" title="支付宝"></div></section></main><footer class="foot"><div class="foot-copy">&copy; 2016-2019 Cary</div></footer><!--include ../plugins/google.pug--><script src="/js/particles.min.js"></script><script src="/js/particles.other.js"></script><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>