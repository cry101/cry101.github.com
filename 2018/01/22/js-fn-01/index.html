<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Cary"><meta name="keywords" content="个人博客"><meta name="description" conauthortent="若尧的博客"><link rel="alternative" href="/atom.xml" title="若尧" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>js函数递归调用与数组全排列 - 若尧</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><div class="hide" id="particles-oli-wrapper"></div><header class="head"><h1 class="head-title u-fl"><a href="/">若尧</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">关于</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-01-22T07:03:09.000Z">一月 22, 2018</time><h1 class="post__title"><a href="/2018/01/22/js-fn-01/">js函数递归调用与数组全排列</a></h1><div class="post__main echo"><h3 id="1-递归的定义"><a href="#1-递归的定义" class="headerlink" title="1.递归的定义"></a>1.递归的定义</h3><p>递归就是函数自己调用自己。<br>递归需要有出口return，不然会栈溢出。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	fun()</span><br><span class="line">&#125;</span><br><span class="line">fun()</span><br></pre></td></tr></table></figure></p>
<p>可以实现类似阶乘的算法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n === <span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// func(n-1) 因为传递的参数是 n-1,那么就是求 (n-1) 的阶乘</span></span><br><span class="line">    <span class="keyword">return</span> n * func(n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">5</span>) <span class="comment">//5*4*3*2*1</span></span><br></pre></td></tr></table></figure></p>
<p>还有斐波拉契数列: 1， 1， 2， 3， 5， 8， 13， 21<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fib</span> (<span class="params">n</span>)</span>&#123;  </span><br><span class="line">  <span class="keyword">if</span>(n&lt;=<span class="number">2</span>)&#123;  </span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;  </span><br><span class="line">  <span class="keyword">return</span> fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>);    </span><br><span class="line">&#125;  </span><br><span class="line">fib(<span class="number">5</span>); <span class="comment">// 2+3 = 5</span></span><br></pre></td></tr></table></figure></p>
<h3 id="2-数组的全排列"><a href="#2-数组的全排列" class="headerlink" title="2.数组的全排列"></a>2.<a href="http://www.jb51.net/article/39291.htm" target="_blank" rel="noopener">数组的全排列</a></h3><p>A(3,3)=6<br>result: [1,2,3] —&gt;<br>[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]</p>
<p>####(1)递归交换<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（递归交换）算法  </span></span><br><span class="line"><span class="comment">1、将第一个位置分别放置各个不同的元素；  </span></span><br><span class="line"><span class="comment">2、对剩余的位置进行全排列（递归）；  </span></span><br><span class="line"><span class="comment">3、递归出口为只对一个元素进行全排列。  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr,i,j</span>) </span>&#123;  <span class="comment">//交换位置</span></span><br><span class="line">    <span class="keyword">if</span>(i!=j) &#123;  </span><br><span class="line">        <span class="keyword">var</span> temp=arr[i];  </span><br><span class="line">        arr[i]=arr[j];  </span><br><span class="line">        arr[j]=temp;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> newArr = [];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">	</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n</span>) </span>&#123; <span class="comment">//为第n个位置选择元素  </span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=n;i&lt;arr.length;i++) &#123;  </span><br><span class="line">            swap(arr,i,n);  </span><br><span class="line">            <span class="keyword">if</span>(n+<span class="number">1</span>&lt;arr.length<span class="number">-1</span>)&#123;</span><br><span class="line">            	<span class="comment">//判断数组中剩余的待全排列的元素是否大于1个  </span></span><br><span class="line">                fn(n+<span class="number">1</span>); <span class="comment">//从第n+1个下标进行全排列  </span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            	<span class="built_in">console</span>.log(newArr)</span><br><span class="line">            	newArr.push(arr); <span class="comment">//显示一组结果</span></span><br><span class="line">            &#125;   </span><br><span class="line">            swap(arr,i,n);  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;)(<span class="number">0</span>); </span><br><span class="line">    </span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</span><br></pre></td></tr></table></figure></p>
<h4 id="2-递归链接"><a href="#2-递归链接" class="headerlink" title="(2).递归链接"></a>(2).递归链接</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（递归链接）算法  </span></span><br><span class="line"><span class="comment">1、设定源数组为输入数组，结果数组存放排列结果（初始化为空数组）；  </span></span><br><span class="line"><span class="comment">2、逐一将源数组的每个元素链接到结果数组中（生成新数组对象）；  </span></span><br><span class="line"><span class="comment">3、从原数组中删除被链接的元素（生成新数组对象）；  </span></span><br><span class="line"><span class="comment">4、将新的源数组和结果数组作为参数递归调用步骤2、3，直到源数组为空，则输出一个排列。  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123; </span><br><span class="line">	<span class="keyword">let</span> newArr = [];</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">source, result</span>) </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (source.length == <span class="number">0</span>)  </span><br><span class="line">            newArr.push(result) <span class="comment">//result;  </span></span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; source.length; i++)  </span><br><span class="line">                fn(source.slice(<span class="number">0</span>, i).concat(source.slice(i + <span class="number">1</span>)), result.concat(source[i]));  </span><br><span class="line">    &#125;)(arr, []);  </span><br><span class="line">    <span class="keyword">return</span> newArr</span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="3-递归回溯"><a href="#3-递归回溯" class="headerlink" title="(3).递归回溯"></a>(3).递归回溯</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（递归回溯）算法  </span></span><br><span class="line"><span class="comment">1、建立位置数组，即对位置进行排列，排列成功后转换为元素的排列；  </span></span><br><span class="line"><span class="comment">2、建立递归函数，用来搜索第n个位置；  </span></span><br><span class="line"><span class="comment">3、第n个位置搜索方式与八皇后问题类似。  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">"P&lt;sub&gt;"</span> + ++count + <span class="string">"&lt;/sub&gt;: "</span> + arr + <span class="string">"&lt;br /&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seek</span>(<span class="params">index, n</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (n &gt;= <span class="number">0</span>) <span class="comment">//判断是否已回溯到了第一个位置之前，即已经找到了所有位置排列  </span></span><br><span class="line">        <span class="keyword">if</span> (index[n] &lt; index.length - <span class="number">1</span>) &#123; <span class="comment">//还有下一个位置可选  </span></span><br><span class="line">            index[n]++; <span class="comment">//选择下一个位置  </span></span><br><span class="line">            <span class="keyword">if</span> ((<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">//该匿名函数判断该位置是否已经被选择过  </span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++)  </span><br><span class="line">                    <span class="keyword">if</span> (index[i] == index[n]) <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//已选择  </span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//未选择  </span></span><br><span class="line">            &#125;)())  </span><br><span class="line">                <span class="keyword">return</span> seek(index, n); <span class="comment">//重新找位置  </span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//找到  </span></span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">//当前无位置可选，进行递归回溯  </span></span><br><span class="line">            index[n] = <span class="number">-1</span>; <span class="comment">//取消当前位置  </span></span><br><span class="line">            <span class="keyword">if</span> (seek(index, n - <span class="number">1</span>)) <span class="comment">//继续找上一个位置  </span></span><br><span class="line">                <span class="keyword">return</span> seek(index, n); <span class="comment">//重新找当前位置  </span></span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//已无位置可选  </span></span><br><span class="line">        &#125;  </span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> index = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length);  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; index.length; i++)  </span><br><span class="line">        index[i] = <span class="number">-1</span>; <span class="comment">//初始化所有位置为-1，以便++后为0  </span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; index.length - <span class="number">1</span>; i++)  </span><br><span class="line">        seek(index, i); <span class="comment">//先搜索前n-1个位置  </span></span><br><span class="line">    <span class="keyword">while</span> (seek(index, index.length - <span class="number">1</span>)) &#123; <span class="comment">//不断搜索第n个位置，即找到所有位置排列  </span></span><br><span class="line">        <span class="keyword">var</span> temp = [];  </span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; index.length; i++) <span class="comment">//将位置之转换为元素  </span></span><br><span class="line">            temp.push(arr[index[i]]);  </span><br><span class="line">        show(temp);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="string">"e1"</span>, <span class="string">"e2"</span>, <span class="string">"e3"</span>, <span class="string">"e4"</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="4-非递归回溯"><a href="#4-非递归回溯" class="headerlink" title="(4).非递归回溯"></a>(4).非递归回溯</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（非递归回溯）算法  </span></span><br><span class="line"><span class="comment">1、建立位置数组，即对位置进行排列，排列成功后转换为元素的排列；  </span></span><br><span class="line"><span class="comment">2、第n个位置搜索方式与八皇后问题类似。  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">"P&lt;sub&gt;"</span> + ++count + <span class="string">"&lt;/sub&gt;: "</span> + arr + <span class="string">"&lt;br /&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seek</span>(<span class="params">index, n</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> flag = <span class="literal">false</span>, m = n; <span class="comment">//flag为找到位置排列的标志，m保存正在搜索哪个位置  </span></span><br><span class="line">    <span class="keyword">do</span> &#123;  </span><br><span class="line">        index[n]++;  </span><br><span class="line">        <span class="keyword">if</span> (index[n] == index.length) <span class="comment">//已无位置可用  </span></span><br><span class="line">            index[n--] = <span class="number">-1</span>; <span class="comment">//重置当前位置，回退到上一个位置  </span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (!(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; n; i++)  </span><br><span class="line">                <span class="keyword">if</span> (index[i] == index[n]) <span class="keyword">return</span> <span class="literal">true</span>;  </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">        &#125;)()) <span class="comment">//该位置未被选择  </span></span><br><span class="line">            <span class="keyword">if</span> (m == n) <span class="comment">//当前位置搜索完成  </span></span><br><span class="line">                flag = <span class="literal">true</span>;  </span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">                n++;  </span><br><span class="line">    &#125; <span class="keyword">while</span> (!flag &amp;&amp; n &gt;= <span class="number">0</span>)  </span><br><span class="line">    <span class="keyword">return</span> flag;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> index = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length);  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; index.length; i++)  </span><br><span class="line">        index[i] = <span class="number">-1</span>;  </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; index.length - <span class="number">1</span>; i++)  </span><br><span class="line">        seek(index, i);  </span><br><span class="line">    <span class="keyword">while</span> (seek(index, index.length - <span class="number">1</span>)) &#123;  </span><br><span class="line">        <span class="keyword">var</span> temp = [];  </span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; index.length; i++)  </span><br><span class="line">            temp.push(arr[index[i]]);  </span><br><span class="line">        show(temp);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="string">"e1"</span>, <span class="string">"e2"</span>, <span class="string">"e3"</span>, <span class="string">"e4"</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="5-非递归求顺序"><a href="#5-非递归求顺序" class="headerlink" title="(5).非递归求顺序"></a>(5).非递归求顺序</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（非递归求顺序）算法  </span></span><br><span class="line"><span class="comment">1、建立位置数组，即对位置进行排列，排列成功后转换为元素的排列；  </span></span><br><span class="line"><span class="comment">2、按如下算法求全排列：  </span></span><br><span class="line"><span class="comment">设P是1～n(位置编号)的一个全排列：p = p1,p2...pn = p1,p2...pj-1,pj,pj+1...pk-1,pk,pk+1...pn  </span></span><br><span class="line"><span class="comment">(1)从排列的尾部开始，找出第一个比右边位置编号小的索引j（j从首部开始计算），即j = max&#123;i | pi &lt; pi+1&#125;  </span></span><br><span class="line"><span class="comment">(2)在pj的右边的位置编号中，找出所有比pj大的位置编号中最小的位置编号的索引k，即 k = max&#123;i | pi &gt; pj&#125;  </span></span><br><span class="line"><span class="comment">   pj右边的位置编号是从右至左递增的，因此k是所有大于pj的位置编号中索引最大的  </span></span><br><span class="line"><span class="comment">(3)交换pj与pk  </span></span><br><span class="line"><span class="comment">(4)再将pj+1...pk-1,pk,pk+1...pn翻转得到排列p' = p1,p2...pj-1,pj,pn...pk+1,pk,pk-1...pj+1  </span></span><br><span class="line"><span class="comment">(5)p'便是排列p的下一个排列  </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">例如：  </span></span><br><span class="line"><span class="comment">24310是位置编号0～4的一个排列，求它下一个排列的步骤如下：  </span></span><br><span class="line"><span class="comment">(1)从右至左找出排列中第一个比右边数字小的数字2；  </span></span><br><span class="line"><span class="comment">(2)在该数字后的数字中找出比2大的数中最小的一个3；  </span></span><br><span class="line"><span class="comment">(3)将2与3交换得到34210；  </span></span><br><span class="line"><span class="comment">(4)将原来2（当前3）后面的所有数字翻转，即翻转4210，得30124；  </span></span><br><span class="line"><span class="comment">(5)求得24310的下一个排列为30124。  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">"P&lt;sub&gt;"</span> + ++count + <span class="string">"&lt;/sub&gt;: "</span> + arr + <span class="string">"&lt;br /&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swap</span>(<span class="params">arr, i, j</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> t = arr[i];  </span><br><span class="line">    arr[i] = arr[j];  </span><br><span class="line">    arr[j] = t;  </span><br><span class="line"></span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sort</span>(<span class="params">index</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = index.length - <span class="number">2</span>; j &gt;= <span class="number">0</span> &amp;&amp; index[j] &gt; index[j + <span class="number">1</span>]; j--)  </span><br><span class="line">        ; <span class="comment">//本循环从位置数组的末尾开始，找到第一个左边小于右边的位置，即j  </span></span><br><span class="line">    <span class="keyword">if</span> (j &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">//已完成全部排列  </span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> k = index.length - <span class="number">1</span>; index[k] &lt; index[j]; k--)  </span><br><span class="line">        ; <span class="comment">//本循环从位置数组的末尾开始，找到比j位置大的位置中最小的，即k  </span></span><br><span class="line">    swap(index, j, k);  </span><br><span class="line">    <span class="keyword">for</span> (j = j + <span class="number">1</span>, k = index.length - <span class="number">1</span>; j &lt; k; j++, k--)  </span><br><span class="line">        swap(index, j, k); <span class="comment">//本循环翻转j+1到末尾的所有位置  </span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> index = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length);  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; index.length; i++)  </span><br><span class="line">        index[i] = i;  </span><br><span class="line">    <span class="keyword">do</span> &#123;  </span><br><span class="line">        <span class="keyword">var</span> temp = [];  </span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; index.length; i++)  </span><br><span class="line">            temp.push(arr[index[i]]);  </span><br><span class="line">        show(temp);  </span><br><span class="line">    &#125; <span class="keyword">while</span> (sort(index));  </span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="string">"e1"</span>, <span class="string">"e2"</span>, <span class="string">"e3"</span>, <span class="string">"e4"</span>]);</span><br></pre></td></tr></table></figure>
<h4 id="6-非递归求模"><a href="#6-非递归求模" class="headerlink" title="(6).非递归求模"></a>(6).非递归求模</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  </span></span><br><span class="line"><span class="comment">全排列（非递归求模）算法  </span></span><br><span class="line"><span class="comment">1、初始化存放全排列结果的数组result，与原数组的元素个数相等；  </span></span><br><span class="line"><span class="comment">2、计算n个元素全排列的总数，即n!；  </span></span><br><span class="line"><span class="comment">3、从&gt;=0的任意整数开始循环n!次，每次累加1，记为index；  </span></span><br><span class="line"><span class="comment">4、取第1个元素arr[0]，求1进制的表达最低位，即求index模1的值w，将第1个元素（arr[0]）插入result的w位置，并将index迭代为index\1；  </span></span><br><span class="line"><span class="comment">5、取第2个元素arr[1]，求2进制的表达最低位，即求index模2的值w，将第2个元素（arr[1]）插入result的w位置，并将index迭代为index\2；  </span></span><br><span class="line"><span class="comment">6、取第3个元素arr[2]，求3进制的表达最低位，即求index模3的值w，将第3个元素（arr[2]）插入result的w位置，并将index迭代为index\3；  </span></span><br><span class="line"><span class="comment">7、……  </span></span><br><span class="line"><span class="comment">8、直到取最后一个元素arr[arr.length-1]，此时求得一个排列；  </span></span><br><span class="line"><span class="comment">9、当index循环完成，便求得所有排列。  </span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">例：  </span></span><br><span class="line"><span class="comment">求4个元素["a", "b", "c", "d"]的全排列, 共循环4!=24次，可从任意&gt;=0的整数index开始循环，每次累加1，直到循环完index+23后结束；  </span></span><br><span class="line"><span class="comment">假设index=13（或13+24，13+2*24，13+3*24…），因为共4个元素，故迭代4次，则得到的这一个排列的过程为：  </span></span><br><span class="line"><span class="comment">第1次迭代，13/1，商=13，余数=0，故第1个元素插入第0个位置（即下标为0），得["a"]；  </span></span><br><span class="line"><span class="comment">第2次迭代，13/2, 商=6，余数=1，故第2个元素插入第1个位置（即下标为1），得["a", "b"]；  </span></span><br><span class="line"><span class="comment">第3次迭代，6/3, 商=2，余数=0，故第3个元素插入第0个位置（即下标为0），得["c", "a", "b"]；  </span></span><br><span class="line"><span class="comment">第4次迭代，2/4，商=0，余数=2, 故第4个元素插入第2个位置（即下标为2），得["c", "a", "d", "b"]；  </span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="keyword">var</span> count = <span class="number">0</span>;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">document</span>.write(<span class="string">"P&lt;sub&gt;"</span> + ++count + <span class="string">"&lt;/sub&gt;: "</span> + arr + <span class="string">"&lt;br /&gt;"</span>);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">perm</span>(<span class="params">arr</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> <span class="built_in">Array</span>(arr.length);  </span><br><span class="line">    <span class="keyword">var</span> fac = <span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">2</span>; i &lt;= arr.length; i++)  </span><br><span class="line">        fac *= i;  </span><br><span class="line">    <span class="keyword">for</span> (index = <span class="number">0</span>; index &lt; fac; index++) &#123;  </span><br><span class="line">        <span class="keyword">var</span> t = index;  </span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= arr.length; i++) &#123;  </span><br><span class="line">            <span class="keyword">var</span> w = t % i;  </span><br><span class="line">            <span class="keyword">for</span> (j = i - <span class="number">1</span>; j &gt; w; j--)  </span><br><span class="line">                result[j] = result[j - <span class="number">1</span>];  </span><br><span class="line">            result[w] = arr[i - <span class="number">1</span>];  </span><br><span class="line">            t = <span class="built_in">Math</span>.floor(t / i);  </span><br><span class="line">        &#125;  </span><br><span class="line">        show(result);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">perm([<span class="string">"e1"</span>, <span class="string">"e2"</span>, <span class="string">"e3"</span>, <span class="string">"e4"</span>]);</span><br></pre></td></tr></table></figure></div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/javascript/">javascript</a></li></ul></footer></article><link rel="stylesheet" href="/css/menu.css"><script src="/js/jquery.autoMenu.js"></script><div class="autoMenu" id="autoMenu" data-autoMenu></div><section class="reward"> <a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechatImage.jpg" title="微信"><img src="/img/alipayImage.jpg" title="支付宝"></div></section></main><footer class="foot"><div class="foot-copy">&copy; 2016-2019 Cary</div></footer><!--include ../plugins/google.pug--><script src="/js/particles.min.js"></script><script src="/js/particles.other.js"></script><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>